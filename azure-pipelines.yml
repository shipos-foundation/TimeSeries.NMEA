trigger:
- master

pool: 
  vmImage: "ubuntu-latest"

variables:
  buildConfiguration: "Release"

jobs:
  - job: "DotNet"
    steps:
    - checkout: self
      submodules: recursive

    - bash: dotnet restore --no-cache --verbosity normal
      displayName: Restore

    - bash: dotnet build --no-restore --configuration Release
      displayName: Build

    - bash: dotnet test --configuration Release --no-build
      displayName: Test

  - job: "DockerBuild"
    steps:
    - bash: docker build --no-cache -f ./Source/Dockerfile -t shipos/timeseries-nmea:$(tag) . --build-arg CONFIGURATION="Release"



